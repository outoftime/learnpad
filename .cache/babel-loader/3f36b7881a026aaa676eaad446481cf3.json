{
  "ast": null,
  "code": "function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport prettyCSS from 'PrettyCSS';\nimport trim from 'lodash-es/trim';\nimport endsWith from 'lodash-es/endsWith';\nimport Validator from '../Validator';\nvar RADIAL_GRADIENT_EXPR = /^(?:(?:\\x2D(?:ms|moz|o|webkit)\\x2D)?radial\\x2Dgradient|\\x2Dwebkit\\x2Dgradient)/;\nvar FILTER_VALUE_EXPR = // eslint-disable-next-line require-unicode-regexp\nnew RegExp(['^blur\\\\(', '^brightness\\\\(', '^contrast\\\\(', '^drop-shadow\\\\(', '^grayscale\\\\(', '^hue-rotate\\\\(', '^invert\\\\(', '^opacity\\\\(', '^saturate\\\\(', '^sepia\\\\(', '^inherit$'].join('|'));\n\nfunction isIncorrectlyRejectedValue(value) {\n  return isIncorrectlyRejectedRadialGradientValue(value) || isIncorrectlyRejectedFilterValue(value);\n}\n\nfunction isIncorrectlyRejectedRadialGradientValue(value) {\n  return RADIAL_GRADIENT_EXPR.test(value);\n}\n\nfunction isIncorrectlyRejectedFilterValue(value) {\n  return FILTER_VALUE_EXPR.test(value);\n}\n\nvar errorMap = {\n  'block-expected': function blockExpected(error) {\n    var tokenType = error.token.type;\n    var token = error.token.content;\n\n    if (tokenType === 'IDENT' || tokenType === 'S') {\n      return {\n        reason: 'block-expected',\n        payload: {\n          error: token\n        },\n        suppresses: ['missing-opening-curly']\n      };\n    }\n\n    return {\n      reason: 'invalid-token-in-selector',\n      payload: {\n        token: token\n      }\n    };\n  },\n  'extra-tokens-after-value': function extraTokensAfterValue(error, source) {\n    var errorToken = error.token;\n    var lineNumber = errorToken.line;\n\n    if (lineNumber > 1) {\n      var lines = source.split('\\n');\n      var previousLine = lines[lineNumber - 2];\n      var thisLine = lines[lineNumber - 1];\n\n      if (errorToken.charNum - 1 === /(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])/.exec(thisLine).index && !endsWith(trim(previousLine), ';')) {\n        return {\n          reason: 'missing-semicolon',\n          row: lineNumber - 2,\n          column: previousLine.length - 1\n        };\n      }\n    }\n\n    return {\n      reason: 'extra-tokens-after-value',\n      payload: {\n        token: errorToken.content\n      }\n    };\n  },\n  'illegal-token-after-combinator': function illegalTokenAfterCombinator() {\n    return {\n      reason: 'illegal-token-after-combinator',\n      suppresses: ['block-expected']\n    };\n  },\n  'invalid-token': function invalidToken() {\n    return {\n      reason: 'invalid-token',\n      suppresses: ['illegal-token-after-combinator', 'invalid-token-in-selector', 'missing-opening-curly']\n    };\n  },\n  'invalid-value': function invalidValue(error) {\n    if (isIncorrectlyRejectedValue(error.token.content)) {\n      return null;\n    }\n\n    return {\n      reason: 'invalid-value',\n      payload: {\n        error: error.token.content\n      }\n    };\n  },\n  'require-value': function requireValue(error) {\n    return {\n      reason: 'require-value',\n      payload: {\n        error: error.token.content\n      }\n    };\n  },\n  'require-positive-value': function requirePositiveValue(error) {\n    return {\n      reason: 'invalid-negative-value',\n      payload: {\n        error: error.token.content\n      }\n    };\n  },\n  'require-integer': function requireInteger(error) {\n    return {\n      reason: 'invalid-fractional-value',\n      payload: {\n        error: error.token.content\n      }\n    };\n  },\n  'selector-expected': function selectorExpected() {\n    return {\n      reason: 'selector-expected'\n    };\n  },\n  'unknown-property': function unknownProperty(error) {\n    return {\n      reason: 'unknown-property',\n      payload: {\n        error: error.token.content\n      }\n    };\n  }\n};\n\nvar PrettyCssValidator =\n/*#__PURE__*/\nfunction (_Validator) {\n  _inherits(PrettyCssValidator, _Validator);\n\n  function PrettyCssValidator(source) {\n    _classCallCheck(this, PrettyCssValidator);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(PrettyCssValidator).call(this, source, 'css', errorMap));\n  }\n\n  _createClass(PrettyCssValidator, [{\n    key: \"getRawErrors\",\n    value: function () {\n      var _getRawErrors = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var result;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                result = prettyCSS.parse(this.source);\n                return _context.abrupt(\"return\", result.getProblems());\n\n              case 5:\n                _context.prev = 5;\n                _context.t0 = _context[\"catch\"](0);\n                return _context.abrupt(\"return\", []);\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 5]]);\n      }));\n\n      function getRawErrors() {\n        return _getRawErrors.apply(this, arguments);\n      }\n\n      return getRawErrors;\n    }()\n  }, {\n    key: \"keyForError\",\n    value: function keyForError(error) {\n      return error.code.split(':')[0];\n    }\n  }, {\n    key: \"locationForError\",\n    value: function locationForError(error) {\n      if (!error.token) {\n        return {\n          row: 0,\n          column: 0\n        };\n      }\n\n      return {\n        row: error.token.line - 1,\n        column: error.token.charNum - 1\n      };\n    }\n  }]);\n\n  return PrettyCssValidator;\n}(Validator);\n\nexport default (function (source) {\n  return new PrettyCssValidator(source).getAnnotations();\n});",
  "map": {
    "version": 3,
    "sources": [
      "/Users/peter/Desktop/code/popcode/src/validations/css/prettycss.js"
    ],
    "names": [
      "prettyCSS",
      "trim",
      "endsWith",
      "Validator",
      "RADIAL_GRADIENT_EXPR",
      "FILTER_VALUE_EXPR",
      "RegExp",
      "join",
      "isIncorrectlyRejectedValue",
      "value",
      "isIncorrectlyRejectedRadialGradientValue",
      "isIncorrectlyRejectedFilterValue",
      "test",
      "errorMap",
      "error",
      "tokenType",
      "token",
      "type",
      "content",
      "reason",
      "payload",
      "suppresses",
      "source",
      "errorToken",
      "lineNumber",
      "line",
      "lines",
      "split",
      "previousLine",
      "thisLine",
      "charNum",
      "exec",
      "index",
      "row",
      "column",
      "length",
      "PrettyCssValidator",
      "result",
      "parse",
      "getProblems",
      "code",
      "getAnnotations"
    ],
    "mappings": "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",
    "sourcesContent": [
      "import prettyCSS from 'PrettyCSS';\nimport trim from 'lodash-es/trim';\nimport endsWith from 'lodash-es/endsWith';\n\nimport Validator from '../Validator';\n\nconst RADIAL_GRADIENT_EXPR = /^(?:(?:-(?:ms|moz|o|webkit)-)?radial-gradient|-webkit-gradient)/u;\n\nconst FILTER_VALUE_EXPR =\n  // eslint-disable-next-line require-unicode-regexp\n  new RegExp(\n    [\n      '^blur\\\\(',\n      '^brightness\\\\(',\n      '^contrast\\\\(',\n      '^drop-shadow\\\\(',\n      '^grayscale\\\\(',\n      '^hue-rotate\\\\(',\n      '^invert\\\\(',\n      '^opacity\\\\(',\n      '^saturate\\\\(',\n      '^sepia\\\\(',\n      '^inherit$',\n    ].join('|'),\n  );\n\nfunction isIncorrectlyRejectedValue(value) {\n  return (\n    isIncorrectlyRejectedRadialGradientValue(value) ||\n    isIncorrectlyRejectedFilterValue(value)\n  );\n}\n\nfunction isIncorrectlyRejectedRadialGradientValue(value) {\n  return RADIAL_GRADIENT_EXPR.test(value);\n}\nfunction isIncorrectlyRejectedFilterValue(value) {\n  return FILTER_VALUE_EXPR.test(value);\n}\n\nconst errorMap = {\n  'block-expected': error => {\n    const tokenType = error.token.type;\n    const token = error.token.content;\n\n    if (tokenType === 'IDENT' || tokenType === 'S') {\n      return {\n        reason: 'block-expected',\n        payload: {error: token},\n        suppresses: ['missing-opening-curly'],\n      };\n    }\n\n    return {\n      reason: 'invalid-token-in-selector',\n      payload: {token},\n    };\n  },\n\n  'extra-tokens-after-value': (error, source) => {\n    const errorToken = error.token;\n    const lineNumber = errorToken.line;\n\n    if (lineNumber > 1) {\n      const lines = source.split('\\n');\n      const previousLine = lines[lineNumber - 2];\n      const thisLine = lines[lineNumber - 1];\n\n      if (\n        errorToken.charNum - 1 === /\\S/u.exec(thisLine).index &&\n        !endsWith(trim(previousLine), ';')\n      ) {\n        return {\n          reason: 'missing-semicolon',\n          row: lineNumber - 2,\n          column: previousLine.length - 1,\n        };\n      }\n    }\n\n    return {\n      reason: 'extra-tokens-after-value',\n      payload: {token: errorToken.content},\n    };\n  },\n\n  'illegal-token-after-combinator': () => ({\n    reason: 'illegal-token-after-combinator',\n    suppresses: ['block-expected'],\n  }),\n\n  'invalid-token': () => ({\n    reason: 'invalid-token',\n    suppresses: [\n      'illegal-token-after-combinator',\n      'invalid-token-in-selector',\n      'missing-opening-curly',\n    ],\n  }),\n\n  'invalid-value': error => {\n    if (isIncorrectlyRejectedValue(error.token.content)) {\n      return null;\n    }\n\n    return {\n      reason: 'invalid-value',\n      payload: {error: error.token.content},\n    };\n  },\n\n  'require-value': error => ({\n    reason: 'require-value',\n    payload: {error: error.token.content},\n  }),\n\n  'require-positive-value': error => ({\n    reason: 'invalid-negative-value',\n    payload: {error: error.token.content},\n  }),\n\n  'require-integer': error => ({\n    reason: 'invalid-fractional-value',\n    payload: {error: error.token.content},\n  }),\n\n  'selector-expected': () => ({reason: 'selector-expected'}),\n\n  'unknown-property': error => ({\n    reason: 'unknown-property',\n    payload: {error: error.token.content},\n  }),\n};\n\nclass PrettyCssValidator extends Validator {\n  constructor(source) {\n    super(source, 'css', errorMap);\n  }\n\n  async getRawErrors() {\n    try {\n      const result = prettyCSS.parse(this.source);\n      return result.getProblems();\n    } catch (_e) {\n      return [];\n    }\n  }\n\n  keyForError(error) {\n    return error.code.split(':')[0];\n  }\n\n  locationForError(error) {\n    if (!error.token) {\n      return {row: 0, column: 0};\n    }\n    return {row: error.token.line - 1, column: error.token.charNum - 1};\n  }\n}\n\nexport default source => new PrettyCssValidator(source).getAnnotations();\n"
    ]
  },
  "metadata": {},
  "sourceType": "module"
}
